!!!
%html{ lang: "zh" }
  %head
    %meta{ content: "text/html; charset=utf-8", http:{ equiv: "Content-Type" } }
    %meta{ content: "width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no", name: "viewport"}

    %title 正道中医信息系统

    = csrf_meta_tags

    = stylesheet_link_tag :zhengdao, :'data-turbolinks-track' => true
    = javascript_include_tag :zhengdao, :'data-turbolinks-track' => true

  %body.manager

    :ruby
      scene = case current_user.role
        when 'admin'
          {
            name: '管理功能',
            funcs: DataFormer.new(current_user).logic(:funcs).data()[:funcs]
          }
        end


      manager_sidebar_data = {
        current_func: @current_func,

        dashboard: {
          id: 'dashboard',
          name: '总控面板',
          icon: 'dashboard',
          url: manager_path
        },

        scenes: [
          scene,
        ]
      }

      top_menu_data = {
        sign_out_url: api_sign_out_path,
        sign_out_to_url: root_path
      }

    = react_component 'LayoutManagerSidebar', data: manager_sidebar_data
    .manager-sidebar-pusher
      = react_component 'LayoutManagerTopMenu', data: top_menu_data, current_user_data: nil, extend_nav_data: @extend_nav_data

      .manager-page-content
        .func-content.ui.segment.basic
          = yield